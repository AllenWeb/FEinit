#!/usr/bin/env node

var execFile = require('child_process').execFile;
var spawn = require('child_process').spawn;
var join = require('path').join;
var root = join(__dirname, '../');
var read = require('read');
var colors = require('colors');
read({
    prompt: '['+'?'.bold.green+'] 添加FEinit到鼠标右键 ?[Y/n]',
    default: 'n',
    timeout: 100000
}, function(err, value) {
    if (/^y$/i.test(value)) {
        var exe = execFile(root + '/install.cmd', [])
        exe.stdout.on('data', function(data) {
            console.log('NOTE'.green + ': ' + data);
        });
        exe.stderr.on('data', function(data) {
            console.log('ERROR'.red + ': ' + data);
        });
        exe.on('exit', function(){
            console.log('Done, Install Success!'.bold.green);
        })
    }
});

spawn('cd init && npm install');